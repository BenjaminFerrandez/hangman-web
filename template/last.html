<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeu du Pendu</title>
  <style>
    /* Style pour le pendu */
    .hangman {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .hangman div {
      width: 20px;
      height: 3px;
      background-color: black;
      margin: 0 5px;
    }
    /* Style pour les lettres */
    .letters {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .letter {
      width: 30px;
      height: 30px;
      border: 1px solid black;
      margin: 0 5px;
      text-align: center;
      line-height: 30px;
      cursor: pointer;
    }
    /* Style pour le mot caché */
    .word {
      margin-top: 20px;
      font-size: 24px;
      text-align: center;
    }
    /* Style pour l'affichage du nombre d'essais restants */
    #attempts {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 18px;
    }
    /* Style pour les boutons */
    .buttons {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .button {
      margin: 0 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>

<body background="../images/fond.png">
  <h1>Jeu du Pendu</h1>
  <div id="attempts"></div>
  <div class="hangman" id="hangman"></div>
  <div class="word" id="word"></div>
  <div class="letters" id="letters"></div>
  <div class="buttons">
    <div class="button" id="play-again">Rejouer</div>
  </div>

  <script>
    // Liste de mots pour le jeu
    const words = ["javascript", "html", "css", "programming", "computer"];

    let chosenWord, maxAttempts, attemptsLeft, guessedLetters;

    function startGame() {
      chosenWord = words[Math.floor(Math.random() * words.length)];
      maxAttempts = 6;
      attemptsLeft = maxAttempts;
      guessedLetters = [];

      // Afficher le nombre d'essais restants
      document.getElementById("attempts").textContent = "Essais restants : " + attemptsLeft;

      // Afficher les tirets pour le mot à deviner
      let wordDisplay = chosenWord.replace(/\w/g, "_").split('').join(' ');
      document.getElementById("word").textContent = wordDisplay;

      // Réinitialiser l'affichage du pendu
      updateHangman();

      // Réinitialiser les boutons de lettres
      generateAlphabetButtons();
    }

    // Générer les boutons pour les lettres de l'alphabet
    function generateAlphabetButtons() {
      for (let i = 0; i < 26; i++) {
        let letter = String.fromCharCode(97 + i); // ASCII code pour 'a' est 97
        let button = document.createElement("div");
        button.textContent = letter;
        button.classList.add("letter");
        button.addEventListener("click", () => guessLetter(letter));
        document.getElementById("letters").appendChild(button);
      }
    }

    // Fonction pour vérifier si la lettre devinée est correcte
    function guessLetter(letter) {
      if (!guessedLetters.includes(letter)) {
        guessedLetters.push(letter);
        if (!chosenWord.includes(letter)) {
          attemptsLeft--;
          updateHangman();
          document.getElementById("attempts").textContent = "Essais restants : " + attemptsLeft;
        }
        let newWordDisplay = "";
        for (let char of chosenWord) {
          if (guessedLetters.includes(char)) {
            newWordDisplay += char + ' ';
          } else {
            newWordDisplay += "_ ";
          }
        }
        document.getElementById("word").textContent = newWordDisplay;
        if (!newWordDisplay.includes("_")) {
          // Toutes les lettres ont été devinées, afficher un message de victoire
          document.getElementById("word").textContent = "Bien joué ! Tu as trouvé le mot : " + chosenWord;
          document.getElementById("letters").innerHTML = ""; // Effacer les boutons de lettres
        } else if (attemptsLeft === 0) {
          // Nombre d'essais maximum atteint, afficher un message de défaite
          document.getElementById("word").textContent = "Loser ! Le mot était : " + chosenWord + ". C'était facile quand même.";
          document.getElementById("letters").innerHTML = ""; // Effacer les boutons de lettres
        }
      }
      // Désactiver le bouton après avoir cliqué
      document.querySelectorAll(".letter").forEach(btn => {
        if (btn.textContent === letter) {
          btn.style.pointerEvents = "none";
          btn.style.backgroundColor = "red";
        }
      });
    }

    // Fonction pour mettre à jour l'affichage du pendu
    function updateHangman() {
      let hangman = document.getElementById("hangman");
      hangman.innerHTML = "";
      for (let i = 0; i < maxAttempts - attemptsLeft; i++) {
        let bar = document.createElement("div");
        bar.classList.add("hangman-bar");
      }
    }

    // Initialiser le jeu
    startGame();

    // Bouton pour rejouer
    document.getElementById("play-again").addEventListener("click", () => {
      document.getElementById("letters").innerHTML = ""; // Effacer les boutons de lettres
      startGame();
    });

  </script>
</body>
</html>
